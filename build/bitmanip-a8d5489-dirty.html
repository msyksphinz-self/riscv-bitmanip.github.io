
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
  
    <title>RISC-V Bit-Manipulation ISA-extensions &#8212; bitmanip  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/material.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue-grey data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#bitmanip-a8d5489-dirty" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="bitmanip  documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">bitmanip  documentation</span>
          <span class="md-header-nav__topic"> RISC-V Bit-Manipulation ISA-extensions </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = ""versions.json"",
        target_loc = "../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">bitmanip  documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="bitmanip documentation" class="md-nav__button md-logo">
      
        <img src="_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="index.html"
       title="bitmanip documentation">bitmanip  documentation</a>
  </label>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#bitmanip-a8d5489-dirty--page-root" class="md-nav__link">RISC-V Bit-Manipulation ISA-extensions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#abcs" class="md-nav__link">ビットマニピュレーションa、b、c、s拡張の公開レビューと批准のためのグループ化</a>
        </li>
        <li class="md-nav__item"><a href="#id1" class="md-nav__link">ワード命令</a>
        </li>
        <li class="md-nav__item"><a href="#id2" class="md-nav__link">命令セマンティクスのための疑似コード</a>
        </li>
        <li class="md-nav__item"><a href="#extensions" class="md-nav__link">Extensions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#zba-extension" class="md-nav__link">Zba extension</a>
        </li>
        <li class="md-nav__item"><a href="#zbb-basic-bit-manipulation" class="md-nav__link">Zbb: Basic bit-manipulation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id3" class="md-nav__link">否定付き論理演算命令</a>
        </li>
        <li class="md-nav__item"><a href="#leading-trailing" class="md-nav__link">Leading/Trailing ゼロビットカウント命令</a>
        </li>
        <li class="md-nav__item"><a href="#pop-count" class="md-nav__link">Pop Count命令</a>
        </li>
        <li class="md-nav__item"><a href="#id4" class="md-nav__link">整数最大値・最小値命令</a>
        </li>
        <li class="md-nav__item"><a href="#id5" class="md-nav__link">符号拡張・ゼロ拡張命令</a>
        </li>
        <li class="md-nav__item"><a href="#id6" class="md-nav__link">ローテート命令</a>
        </li>
        <li class="md-nav__item"><a href="#or" class="md-nav__link">OR組み合わせ命令</a>
        </li>
        <li class="md-nav__item"><a href="#id7" class="md-nav__link">バイト逆転命令</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#zbc" class="md-nav__link">Zbc: キャリー無し乗算命令</a>
        </li>
        <li class="md-nav__item"><a href="#zbs" class="md-nav__link">Zbs: 単一ビット命令</a>
        </li>
        <li class="md-nav__item"><a href="#zbkc" class="md-nav__link">Zbkc: 暗号向けキャリーレス乗算</a>
        </li>
        <li class="md-nav__item"><a href="#zbkx" class="md-nav__link">Zbkx: クロスバ組み合わせ命令</a>
        </li>
        <li class="md-nav__item"><a href="#zbkb" class="md-nav__link">Zbkb: 暗号化向けビット操作命令</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#instructions-in-alphabetical-order" class="md-nav__link">Instructions (in alphabetical order)</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#add-uw" class="md-nav__link">add.uw</a>
        </li>
        <li class="md-nav__item"><a href="#andn" class="md-nav__link">andn</a>
        </li>
        <li class="md-nav__item"><a href="#bclr" class="md-nav__link">bclr</a>
        </li>
        <li class="md-nav__item"><a href="#bclri" class="md-nav__link">bclri</a>
        </li>
        <li class="md-nav__item"><a href="#bext" class="md-nav__link">bext</a>
        </li>
        <li class="md-nav__item"><a href="#bexti" class="md-nav__link">bexti</a>
        </li>
        <li class="md-nav__item"><a href="#binv" class="md-nav__link">binv</a>
        </li>
        <li class="md-nav__item"><a href="#binvi" class="md-nav__link">binvi</a>
        </li>
        <li class="md-nav__item"><a href="#bset" class="md-nav__link">bset</a>
        </li>
        <li class="md-nav__item"><a href="#bseti" class="md-nav__link">bseti</a>
        </li>
        <li class="md-nav__item"><a href="#clmul" class="md-nav__link">clmul</a>
        </li>
        <li class="md-nav__item"><a href="#clmulh" class="md-nav__link">clmulh</a>
        </li>
        <li class="md-nav__item"><a href="#clmulr" class="md-nav__link">clmulr</a>
        </li>
        <li class="md-nav__item"><a href="#clz" class="md-nav__link">clz</a>
        </li>
        <li class="md-nav__item"><a href="#clzw" class="md-nav__link">clzw</a>
        </li>
        <li class="md-nav__item"><a href="#cpop" class="md-nav__link">cpop</a>
        </li>
        <li class="md-nav__item"><a href="#cpopw" class="md-nav__link">cpopw</a>
        </li>
        <li class="md-nav__item"><a href="#ctz" class="md-nav__link">ctz</a>
        </li>
        <li class="md-nav__item"><a href="#ctzw" class="md-nav__link">ctzw</a>
        </li>
        <li class="md-nav__item"><a href="#max" class="md-nav__link">max</a>
        </li>
        <li class="md-nav__item"><a href="#maxu" class="md-nav__link">maxu</a>
        </li>
        <li class="md-nav__item"><a href="#min" class="md-nav__link">min</a>
        </li>
        <li class="md-nav__item"><a href="#minu" class="md-nav__link">minu</a>
        </li>
        <li class="md-nav__item"><a href="#orc-b" class="md-nav__link">orc.b</a>
        </li>
        <li class="md-nav__item"><a href="#orn" class="md-nav__link">orn</a>
        </li>
        <li class="md-nav__item"><a href="#pack" class="md-nav__link">pack</a>
        </li>
        <li class="md-nav__item"><a href="#packh" class="md-nav__link">packh</a>
        </li>
        <li class="md-nav__item"><a href="#packw" class="md-nav__link">packw</a>
        </li>
        <li class="md-nav__item"><a href="#rev8" class="md-nav__link">rev8</a>
        </li>
        <li class="md-nav__item"><a href="#rev-b" class="md-nav__link">rev.b</a>
        </li>
        <li class="md-nav__item"><a href="#rol" class="md-nav__link">rol</a>
        </li>
        <li class="md-nav__item"><a href="#rolw" class="md-nav__link">rolw</a>
        </li>
        <li class="md-nav__item"><a href="#ror" class="md-nav__link">ror</a>
        </li>
        <li class="md-nav__item"><a href="#rori" class="md-nav__link">rori</a>
        </li>
        <li class="md-nav__item"><a href="#roriw" class="md-nav__link">roriw</a>
        </li>
        <li class="md-nav__item"><a href="#rorw" class="md-nav__link">rorw</a>
        </li>
        <li class="md-nav__item"><a href="#sext-b" class="md-nav__link">sext.b</a>
        </li>
        <li class="md-nav__item"><a href="#sext-h" class="md-nav__link">sext.h</a>
        </li>
        <li class="md-nav__item"><a href="#sh1add" class="md-nav__link">sh1add</a>
        </li>
        <li class="md-nav__item"><a href="#sh1add-uw" class="md-nav__link">sh1add.uw</a>
        </li>
        <li class="md-nav__item"><a href="#sh2add" class="md-nav__link">sh2add</a>
        </li>
        <li class="md-nav__item"><a href="#sh2add-uw" class="md-nav__link">sh2add.uw</a>
        </li>
        <li class="md-nav__item"><a href="#sh3add" class="md-nav__link">sh3add</a>
        </li>
        <li class="md-nav__item"><a href="#sh3add-uw" class="md-nav__link">sh3add.uw</a>
        </li>
        <li class="md-nav__item"><a href="#slli-uw" class="md-nav__link">slli.uw</a>
        </li>
        <li class="md-nav__item"><a href="#unzip" class="md-nav__link">unzip</a>
        </li>
        <li class="md-nav__item"><a href="#xnor" class="md-nav__link">xnor</a>
        </li>
        <li class="md-nav__item"><a href="#xperm-b" class="md-nav__link">xperm.b</a>
        </li>
        <li class="md-nav__item"><a href="#xperm-n" class="md-nav__link">xperm.n</a>
        </li>
        <li class="md-nav__item"><a href="#zext-h" class="md-nav__link">zext.h</a>
        </li>
        <li class="md-nav__item"><a href="#zip" class="md-nav__link">zip</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#software-optimization-guide" class="md-nav__link">Software optimization guide</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#strlen" class="md-nav__link">strlen</a>
        </li>
        <li class="md-nav__item"><a href="#strcmp" class="md-nav__link">strcmp</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/bitmanip-a8d5489-dirty.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="risc-v-bit-manipulation-isa-extensions">
<h1 id="bitmanip-a8d5489-dirty--page-root">RISC-V Bit-Manipulation ISA-extensions<a class="headerlink" href="#bitmanip-a8d5489-dirty--page-root" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date</dt>
<dd class="field-odd"><p>2023-08-07</p>
</dd>
</dl>
<p>This document is released under the <a class="reference external" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0
International License</a>.</p>
<p>It describes the BitManip Zba, Zbb, Zbc and Zbs extensions being
submitted for public review.</p>
<div class="line-block">
<div class="line">Contributors to this specification (in alphabetical order) include:</div>
<div class="line">Jacob Bachmeyer, Allen Baum, Ari Ben, Alex Bradbury, Steven Braeger,
Rogier Brussee, Michael Clark, Ken Dockser, Paul Donahue, Dennis
Ferguson, Fabian Giesen, John Hauser, Robert Henry, Bruce Hoult,
Po-wei Huang, Ben Marshall, Rex McCrary, Lee Moore, Jiří Moravec,
Samuel Neves, Markus Oberhumer, Christopher Olson, Nils Pipenbrinck,
Joseph Rahmeh, Xue Saw, Tommy Thorn, Philipp Tomsich, Avishai Tvila,
Andrew Waterman, Thomas Wicki, and Claire Wolf.</div>
</div>
<p>We express our gratitude to everyone that contributed to, reviewed or
improved this specification through their comments and questions.</p>
<section id="abcs">
<h2 id="abcs">ビットマニピュレーションa、b、c、s拡張の公開レビューと批准のためのグループ化<a class="headerlink" href="#abcs" title="Permalink to this headline">¶</a></h2>
<p>ビットマニピュレーション(bitmanip)拡張は、ベースとなるRISC-Vアーキテクチャに対するいくつかのコンポーネント拡張で構成され、コードサイズの削減、性能向上、エネルギー削減の組み合わせを提供することを目的としている。
これらの命令は一般的に使用されることを意図しているが、いくつかの命令は他の命令よりもある領域で有用である。
そのため、1つの大きな拡張ではなく、いくつかの小さなbitmanip拡張が提供されている。
これらの小さな拡張はそれぞれ共通の機能と使用例によってグループ化され、それぞれ独自のZb*拡張名を持っている。</p>
<p>各 bitmanip
拡張は、同じような目的を持ち、しばしば同じロジックを共有することができるいくつかの
bitmanip 命令のグループを含む。
いくつかの命令は1つの拡張子で利用可能であり、他の命令は複数の拡張子で利用可能である。
命令は、それらが現れる拡張に依存しないニーモニックとエンコーディングを持つ。
したがって、重複する命令を持つ拡張機能を実装する場合、ロジックやエンコーディングに冗長性はない。</p>
<p>bitmanip拡張はRV32とRV64用に定義されている。
ほとんどの命令はRV128と前方互換性があると予想される。
シフト即値命令は最大6ビットの即値フィールドを持つように定義されているが、RV128で必要とされる場合には、エンコード空間に7ビット目が用意されている。</p>
</section>
<section id="id1">
<h2 id="id1">ワード命令<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>bitmanip拡張は、 <em>w</em> 付き命令 (
_w_の前にドットがない)は入力の上位32ビットを無視し、最下位32ビットを符号付き値として演算し、符号をXLENに拡張した32ビットの符号付き結果を生成するというRV64の慣例に従っている。</p>
<p>接尾辞が <em>.uw</em> の Bitmanip 命令は、指定されたレジスタの最下位 32
ビットから抽出された符号なし 32 ビット値をオペランドとして持つ。
それ以外は、完全なXLEN演算を行う。</p>
<p>接尾辞 <em>.b</em> , <em>.h</em> , <em>.w</em> を持つbitmanip命令は、入力の最下位 8
ビット、16 ビット、32 ビット（それぞれ）のみを参照し、符号拡張された
XLEN幅の結果を生成する。
この結果は、特定の命令に基づいて符号拡張またはゼロ拡張される。</p>
</section>
<section id="id2">
<h2 id="id2">命令セマンティクスのための疑似コード<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="#insns">Instructions (in alphabetical order)</a>
で記述される各命令のセマンティクスは、SAILの構文で記述される。</p>
</section>
<section id="extensions">
<h2 id="extensions">Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h2>
<p>パブリック・レビューとして後悔されたbitmanipの最初のグループは以下である。</p>
<ul class="simple">
<li><p><a class="reference external" href="#zba">Address generation instructions</a></p></li>
<li><p><a class="reference external" href="#zbb">Basic bit-manipulation</a></p></li>
<li><p><a class="reference external" href="#zbc">Carry-less multiplication</a></p></li>
<li><p><a class="reference external" href="#zbs">Single-bit instructions</a></p></li>
</ul>
<p>以下は、これらの拡張に含まれるすべての命令(および擬似命令)のリストとそのマッピングの一覧である:</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 27%"/>
<col style="width: 42%"/>
<col style="width: 5%"/>
<col style="width: 5%"/>
<col style="width: 5%"/>
<col style="width: 5%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
<th class="head"><p>Z
b
a</p></th>
<th class="head"><p>Z
b
b</p></th>
<th class="head"><p>Z
b
c</p></th>
<th class="head"><p>Z
b
s</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>add.uw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-add_uw">Add unsigned
word</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>andn <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-andn">AND with inverted
operand</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clmul <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-clmul">Carry-less multiply
(lo
w-part)</a></p></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clmulh <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-clmulh">Carry-less multiply
(high
-part)</a></p></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clmulr <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-clmulr">Carry-less multiply
(rev
ersed)</a></p></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clz <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-clz">Count leading zero
bits</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>clzw <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-clzw">Count leading zero bits
in word</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>cpop <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-cpop">Count set
bits</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>cpopw <em>rd</em>,
<em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-cpopw">Count set bits in
word</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>ctz <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-ctz">Count trailing zero
bits</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>ctzw <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-ctzw">Count trailing zero bits
in word</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>max <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-max">Maximum</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>maxu <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-maxu">Unsigned
maximum</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>min <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-min">Minimum</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>minu <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-minu">Unsigned
minimum</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>orc.b <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-orc_b">Bitwise OR-Combine, byte
granule</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>orn <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-orn">OR with inverted
operand</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rev8 <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-rev8">Byte-reverse
register</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rol <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-rol">Rotate left
(
Register)</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>rolw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-rolw">Rotate Left Word
(R
egister)</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>ror <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-ror">Rotate right
(
Register)</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rori <em>rd</em>,
<em>rs1</em>, <em>shamt</em></p></td>
<td><p><a class="reference external" href="#insns-rori">Rotate right
(Im
mediate)</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>roriw <em>rd</em>,
<em>rs1</em>, <em>shamt</em></p></td>
<td><p><a class="reference external" href="#insns-roriw">Rotate right Word
(Imm
ediate)</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>rorw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-rorw">Rotate right Word
(R
egister)</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bclr <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-bclr">Single-Bit Clear
(R
egister)</a></p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bclri <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-bclri">Single-Bit Clear
(Imm
ediate)</a></p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bext <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-bext">Single-Bit Extract
(R
egister)</a></p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bexti <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-bexti">Single-Bit Extract
(Imm
ediate)</a></p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>binv <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-binv">Single-Bit Invert
(R
egister)</a></p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>binvi <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-binvi">Single-Bit Invert
(Imm
ediate)</a></p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bset <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-bset">Single-Bit Set
(R
egister)</a></p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bseti <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-bseti">Single-Bit Set
(Imm
ediate)</a></p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sext.b <em>rd</em>,
<em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-sext_b">Sign-extend
byte</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sext.h <em>rd</em>,
<em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-sext_h">Sign-extend
ha
lfword</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sh1add <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh1add">Shift left by 1 and
add</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>sh1add.uw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh1add_uw">Shift unsigned word left
by 1 and
add</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sh2add <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh2add">Shift left by 2 and
add</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>sh2add.uw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh2add_uw">Shift unsigned word left
by 2 and
add</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sh3add <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh3add">Shift left by 3 and
add</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>sh3add.uw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh3add_uw">Shift unsigned word left
by 3 and
add</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>slli.uw <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-slli_uw">Shift-left unsigned word
(Immed
iate)</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>xnor <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-xnor">Exclusive
NOR</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>zext.h <em>rd</em>,
<em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-zext_h">Zero-extend
ha
lfword</a></p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>zext.w <em>rd</em>,
<em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-add_uw">Add unsigned
word</a></p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<section id="zba-extension">
<span id="zba"></span><h3 id="zba-extension">Zba extension<a class="headerlink" href="#zba-extension" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Zba extension is frozen.</p>
</div>
<p>Zba命令は、符号なしワードサイズとXLENサイズの両方のインデックスを使用して、基本タイプ(ハーフワード、ワード、ダブルワード)の配列にインデックスを付けるアドレスの生成を高速化するために使用できる。</p>
<p>シフト命令と加算命令で1、2、3の左シフトを行うのは、実際のコードで一般的であり、単純な加算器以上の最小限の追加ハードウェアで実装できるからである。
これにより、実装におけるクリティカル・パスが長くなるのを避けることができる。</p>
<p>シフト命令と加算命令の最大左シフト数は3に制限されているが、(ベースISAの)slli
命令を使用すると、より広い要素の配列にインデックスを付けるために同様のシフトを実行できる。
このサブ拡張で追加されたslli.uwは、インデックスを符号なしワードとして解釈する場合に使用できる。</p>
<p>Zba拡張は以下の命令で構成されている:</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>add.uw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-add_uw">Add unsigned word</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sh1add <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh1add">Shift left by 1 and
add</a></p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>sh1add.uw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh1add_uw">Shift unsigned word left by 1 and
add</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sh2add <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh2add">Shift left by 2 and
add</a></p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>sh2add.uw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh2add_uw">Shift unsigned word left by 2 and
add</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sh3add <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh3add">Shift left by 3 and
add</a></p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>sh3add.uw <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-sh3add_uw">Shift unsigned word left by 3 and
add</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>slli.uw <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-slli_uw">Shift-left unsigned word
(Immediate)</a></p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>zext.w <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-add_uw">Add unsigned word</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="zbb-basic-bit-manipulation">
<span id="zbb"></span><h3 id="zbb-basic-bit-manipulation">Zbb: Basic bit-manipulation<a class="headerlink" href="#zbb-basic-bit-manipulation" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zbb拡張はFrozen状態である。</p>
</div>
<section id="id3">
<h4 id="id3">否定付き論理演算命令<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>andn <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-andn">AND with inverted
operand</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>orn <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-orn">OR with inverted
operand</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>xnor <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-xnor">Exclusive NOR</a></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Logical with Negate instructions can be implemented by inverting
the <em>rs2</em> inputs to the base-required AND, OR, and XOR logic
instructions. In some implementations, the inverter on rs2 used for
subtraction can be reused for this purpose.</p>
</div>
</section>
<section id="leading-trailing">
<h4 id="leading-trailing">Leading/Trailing ゼロビットカウント命令<a class="headerlink" href="#leading-trailing" title="Permalink to this headline">¶</a></h4>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clz <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-clz">Count leading zero
bits</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>clzw <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-clzw">Count leading zero bits in
word</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>ctz <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-ctz">Count trailing zero
bits</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>ctzw <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-ctzw">Count trailing zero bits in
word</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="pop-count">
<h4 id="pop-count">Pop Count命令<a class="headerlink" href="#pop-count" title="Permalink to this headline">¶</a></h4>
<p>これらの命令はセットされている(ビットが1)の数を数える。
これは一般的にPopulation Countと呼ばれている。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>cpop <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-cpop">Count set bits</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>cpopw <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-cpopw">Count set bits in
word</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id4">
<h4 id="id4">整数最大値・最小値命令<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>整数最大値・最小値命令はR-typeの算術演算命令であり、
2つのオペランドの最大値・最小値を返す。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>max <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-max">Maximum</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>maxu <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-maxu">Unsigned maximum</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>min <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-min">Minimum</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>minu <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-minu">Unsigned minimum</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id5">
<h4 id="id5">符号拡張・ゼロ拡張命令<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>これらの命令はソース・レジスタの最下位8ビット、16ビット、32ビットを符号拡張もしくはゼロ拡張する。</p>
<p>これらの命令は、8ビットおよび16ビットのゼロ拡張時は
<code class="docutils literal notranslate"><span class="pre">slli</span> <span class="pre">rD,rs,(XLEN-&lt;size&gt;)</span> <span class="pre">+</span> <span class="pre">srli</span></code> 命令、
16ビットおよび32ビットの符号拡張時は <code class="docutils literal notranslate"><span class="pre">slli</span> <span class="pre">+</span> <span class="pre">srai</span></code>
という一般的なイディオムとして置き換えることができる。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sext.b <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-sext_b">Sign-extend byte</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>sext.h <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-sext_h">Sign-extend
halfword</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>zext.h <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-zext_h">Zero-extend
halfword</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id6">
<h4 id="id6">ローテート命令<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>ビット単位の回転命令は、基本仕様のシフト論理演算に似ている。
ただし、シフトがゼロをシフトするのに対し、ローテート命令は値の反対側にシフトされたビットをシフトする。
このような操作は’循環シフト’とも呼ばれる。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rol <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-rol">Rotate left
(Register)</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>rolw <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-rolw">Rotate Left Word
(Register)</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>ror <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-ror">Rotate right
(Register)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rori <em>rd</em>, <em>rs1</em>,
<em>shamt</em></p></td>
<td><p><a class="reference external" href="#insns-rori">Rotate right
(Immediate)</a></p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>roriw <em>rd</em>,
<em>rs1</em>, <em>shamt</em></p></td>
<td><p><a class="reference external" href="#insns-roriw">Rotate right Word
(Immediate)</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>rorw <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-rorw">Rotate right Word
(Register)</a></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The rotate instructions were included to replace a common
four-instruction sequence to achieve the same effect (neg; sll/srl;
srl/sll; or)</p>
</div>
</section>
<section id="or">
<h4 id="or">OR組み合わせ命令<a class="headerlink" href="#or" title="Permalink to this headline">¶</a></h4>
<p><strong>orc.b</strong> は、結果 <em>rd</em> の各バイトのビットを、 <em>rs</em> の各バ
イト内のビットがセットされていなければすべてゼロに、 <em>rs</em> の各バ
イト内のビットがセットされていればすべて1にセットする。</p>
<p>使用例としては、 <strong>strlen</strong> や <strong>strcpy</strong> のような文字列処理関数がある。
ワード内の非ゼロのバイトのセットビットをカウントすることで、終端ゼロバイトをテストすることができる。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>orc.b <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-orc_b">Bitwise OR-Combine, byte
granule</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id7">
<h4 id="id7">バイト逆転命令<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p><strong>rev8</strong> 命令は、 <em>rs</em> の倍との順序を逆転させる。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rev8 <em>rd</em>, <em>rs</em></p></td>
<td><p><a class="reference external" href="#insns-rev8">Byte-reverse
register</a></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="zbc">
<span id="id8"></span><h3 id="zbc">Zbc: キャリー無し乗算命令<a class="headerlink" href="#zbc" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zbc拡張はFrozen状態である。</p>
</div>
<p>キャリー無し乗算はGF(2)上の多項式環における乗算である。</p>
<p><strong>clmul</strong> はキャリーレス積の下半分を生成し、 <strong>clmulh</strong> は 2✕XLEN
キャリーレス積の上半分を生成する。</p>
<p><strong>clmulr</strong> は 2✕XLEN キャリーレス積のビット 2✕XLEN-2:XLEN-1 を生成する。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clmul <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-clmul">Carry-less multiply
(low-part)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clmulh <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-clmulh">Carry-less multiply
(high-part)</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clmulr <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-clmulr">Carry-less multiply
(reversed)</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="zbs">
<span id="id9"></span><h3 id="zbs">Zbs: 単一ビット命令<a class="headerlink" href="#zbs" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zbc拡張はFrozen状態である。</p>
</div>
<p>シングルビット命令は、レジスタの単一ビットをセット、クリア、反転、または抽出するメカニズムを提供する。
ビットはインデックスで指定する。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bclr <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-bclr">Single-Bit Clear
(Register)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bclri <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-bclri">Single-Bit Clear
(Immediate)</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bext <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-bext">Single-Bit Extract
(Register)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bexti <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-bexti">Single-Bit Extract
(Immediate)</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>binv <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-binv">Single-Bit Invert
(Register)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>binvi <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-binvi">Single-Bit Invert
(Immediate)</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bset <em>rd</em>, <em>rs1</em>,
<em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-bset">Single-Bit Set
(Register)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>bseti <em>rd</em>,
<em>rs1</em>, <em>imm</em></p></td>
<td><p><a class="reference external" href="#insns-bseti">Single-Bit Set
(Immediate)</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="zbkc">
<span id="id10"></span><h3 id="zbkc">Zbkc: 暗号向けキャリーレス乗算<a class="headerlink" href="#zbkc" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zbkc拡張はFrozen状態である。</p>
</div>
<p>キャリーレス乗算は、GF(2)上の多項式環における乗算である。
これはいくつかの暗号ワークロード、特にAES-GCM認証暗号化スキームにおいて重要な演算である。
この拡張は、このワークロードの一部であるGHASH演算を効率的に実装するために必要な命令のみを提供する。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clmul <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-clmul">Carry-less multiply
(low-part)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>clmulh <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-clmulh">Carry-less multiply
(high-part)</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="zbkx">
<span id="id11"></span><h3 id="zbkx">Zbkx: クロスバ組み合わせ命令<a class="headerlink" href="#zbkx" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zbkx拡張はFrozen状態である。</p>
</div>
<p>これらの命令は、汎用レジスタ内の4ビットと8ビットの要素に対して”ルックアップテーブル”を実装する。
<em>rs1</em> はNビット・ワードのベクトルとして使用され、 <em>rs2</em> は <em>rs1</em>
へのNビット・インデックスのベクトルとして使用される。 <em>rs1</em> の要素は、
<em>rs2</em> のインデックス付き要素で置き換えられる。 <em>rs2</em>
へのインデックスが範囲外の場合はゼロとなる。</p>
<p>これらの命令は、Nビット対Nビットのブーリアン演算を表現したり、実行レイテンシが演算対象の(秘密)データに依存しないような、
秘密に依存するメモリアクセス(特にSBox)を持つ暗号コードを実装したりするのに便利である。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>xperm.n <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-xpermn">Crossbar permutation
(nibbles)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>xperm.b <em>rd</em>,
<em>rs1</em>, <em>rs2</em></p></td>
<td><p><a class="reference external" href="#insns-xpermb">Crossbar permutation
(bytes)</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="zbkb">
<span id="id12"></span><h3 id="zbkb">Zbkb: 暗号化向けビット操作命令<a class="headerlink" href="#zbkb" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zbkb拡張はFrozen状態である。</p>
</div>
<p>この拡張には、暗号ワークロードの実装の基本となる共通動作のための命令が含まれている。</p>
<table>
<colgroup>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 28%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RV
32</p></th>
<th class="head"><p>RV
64</p></th>
<th class="head"><p>Mnemonic</p></th>
<th class="head"><p>Instruction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rol</p></td>
<td><p><a class="reference external" href="#insns-rol">Rotate left
(Register)</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>rolw</p></td>
<td><p><a class="reference external" href="#insns-rolw">Rotate Left Word
(Register)</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>ror</p></td>
<td><p><a class="reference external" href="#insns-ror">Rotate right
(Register)</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rori</p></td>
<td><p><a class="reference external" href="#insns-rori">Rotate right
(Immediate)</a></p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>✓</p></td>
<td><p>roriw</p></td>
<td><p><a class="reference external" href="#insns-roriw">Rotate right Word
(Immediate)</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>rorw</p></td>
<td><p><a class="reference external" href="#insns-rorw">Rotate right Word
(Register)</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>andn</p></td>
<td><p><a class="reference external" href="#insns-andn">AND with inverted
operand</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>orn</p></td>
<td><p><a class="reference external" href="#insns-orn">OR with inverted
operand</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>xnor</p></td>
<td><p><a class="reference external" href="#insns-xnor">Exclusive NOR</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>pack</p></td>
<td><p><a class="reference external" href="#insns-pack">Pack low halves of
registers</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>packh</p></td>
<td><p><a class="reference external" href="#insns-packh">Pack low bytes of
registers</a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>✓</p></td>
<td><p>packw</p></td>
<td><p><a class="reference external" href="#insns-packw">Pack low 16-bits of registers
(RV64)</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rev.b</p></td>
<td><p><a class="reference external" href="#insns-revb">Reverse bits in
bytes</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>rev8</p></td>
<td><p><a class="reference external" href="#insns-rev8">Byte-reverse
register</a></p></td>
</tr>
<tr class="row-even"><td><p>✓</p></td>
<td></td>
<td><p>zip</p></td>
<td><p><a class="reference external" href="#insns-zip">Bit interleave</a></p></td>
</tr>
<tr class="row-odd"><td><p>✓</p></td>
<td></td>
<td><p>unzip</p></td>
<td><p><a class="reference external" href="#insns-unzip">Bit deinterleave</a></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="instructions-in-alphabetical-order">
<span id="insns"></span><h2 id="instructions-in-alphabetical-order">Instructions (in alphabetical order)<a class="headerlink" href="#instructions-in-alphabetical-order" title="Permalink to this headline">¶</a></h2>
<section id="add-uw">
<span id="insns-add-uw"></span><h3 id="add-uw">add.uw<a class="headerlink" href="#add-uw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Add unsigned word</p>
</dd>
<dt>Mnemonic</dt><dd><p>add.uw <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
<dt>Pseudoinstructions</dt><dd><p>zext.w <em>rd</em>, <em>rs1</em> → add.uw <em>rd</em>, <em>rs1</em>, zero</p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">Could</span> <span class="ow">not</span> <span class="n">find</span> <span class="n">the</span> <span class="s1">'WaveDromEditor'</span> <span class="n">executable</span> <span class="ow">in</span> <span class="n">PATH</span><span class="p">;</span> <span class="n">add</span> <span class="n">it</span> <span class="n">to</span> <span class="n">the</span> <span class="n">PATH</span> <span class="ow">or</span> <span class="n">specify</span> <span class="n">its</span> <span class="n">location</span> <span class="n">using</span> <span class="n">the</span> <span class="s1">'WaveDromEditor'</span> <span class="n">document</span> <span class="n">attribute</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x0</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ADD.UW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x04</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ADD.UW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs an XLEN-wide addition between <em>rs2</em> and the
zero-extended least-significant word of <em>rs1</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let base = X(rs2);
let index = EXTZ(X(rs1)[31..0]);

X(rd) = base + index;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zba (<a class="reference external" href="#zba">Address generation
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="andn">
<span id="insns-andn"></span><h3 id="andn">andn<a class="headerlink" href="#andn" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>AND with inverted operand</p>
</dd>
<dt>Mnemonic</dt><dd><p>andn <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x7</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ANDN'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x20</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ANDN'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs the bitwise logical AND operation between
<em>rs1</em> and the bitwise inversion of <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = X(rs1) &amp; ~X(rs2);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="bclr">
<span id="insns-bclr"></span><h3 id="bclr">bclr<a class="headerlink" href="#bclr" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Single-Bit Clear (Register)</p>
</dd>
<dt>Mnemonic</dt><dd><p>bclr <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BCLR'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x24</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BCLR/BEXT'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns <em>rs1</em> with a single bit cleared at the index
specified in <em>rs2</em>. The index is read from the lower log2(XLEN) bits
of <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let index = X(rs2) &amp; (XLEN - 1);
X(rd) = X(rs1) &amp; ~(1 &lt;&lt; index)
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbs (<a class="reference external" href="#zbs">Single-bit
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="bclri">
<span id="insns-bclri"></span><h3 id="bclri">bclri<a class="headerlink" href="#bclri" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Single-Bit Clear (Immediate)</p>
</dd>
<dt>Mnemonic</dt><dd><p>bclri <em>rd</em>, <em>rs1</em>, <em>shamt</em></p>
</dd>
</dl>
<p>Encoding (RV32)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BCLRI'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x24</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BCLRI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<p>Encoding (RV64)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BCLRI'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x12</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BCLRI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns <em>rs1</em> with a single bit cleared at the index
specified in <em>shamt</em>. The index is read from the lower log2(XLEN)
bits of <em>shamt</em>. For RV32, the encodings corresponding to shamt[5]=1
are reserved.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let index = shamt &amp; (XLEN - 1);
X(rd) = X(rs1) &amp; ~(1 &lt;&lt; index)
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbs (<a class="reference external" href="#zbs">Single-bit
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="bext">
<span id="insns-bext"></span><h3 id="bext">bext<a class="headerlink" href="#bext" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Single-Bit Extract (Register)</p>
</dd>
<dt>Mnemonic</dt><dd><p>bext <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BEXT'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x24</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BCLR/BEXT'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns a single bit extracted from <em>rs1</em> at the
index specified in <em>rs2</em>. The index is read from the lower log2(XLEN)
bits of <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let index = X(rs2) &amp; (XLEN - 1);
X(rd) = (X(rs1) &gt;&gt; index) &amp; 1;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbs (<a class="reference external" href="#zbs">Single-bit
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="bexti">
<span id="insns-bexti"></span><h3 id="bexti">bexti<a class="headerlink" href="#bexti" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Single-Bit Extract (Immediate)</p>
</dd>
<dt>Mnemonic</dt><dd><p>bexti <em>rd</em>, <em>rs1</em>, <em>shamt</em></p>
</dd>
</dl>
<p>Encoding (RV32)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BEXTI'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x24</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BEXTI/BCLRI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<p>Encoding (RV64)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BEXTI'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x12</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BEXTI/BCLRI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns a single bit extracted from <em>rs1</em> at the
index specified in <em>rs2</em>. The index is read from the lower log2(XLEN)
bits of <em>shamt</em>. For RV32, the encodings corresponding to shamt[5]=1
are reserved.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let index = shamt &amp; (XLEN - 1);
X(rd) = (X(rs1) &gt;&gt; index) &amp; 1;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbs (<a class="reference external" href="#zbs">Single-bit
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="binv">
<span id="insns-binv"></span><h3 id="binv">binv<a class="headerlink" href="#binv" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Single-Bit Invert (Register)</p>
</dd>
<dt>Mnemonic</dt><dd><p>binv <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BINV'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x34</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BINV'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns <em>rs1</em> with a single bit inverted at the
index specified in <em>rs2</em>. The index is read from the lower log2(XLEN)
bits of <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let index = X(rs2) &amp; (XLEN - 1);
X(rd) = X(rs1) ^ (1 &lt;&lt; index)
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbs (<a class="reference external" href="#zbs">Single-bit
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="binvi">
<span id="insns-binvi"></span><h3 id="binvi">binvi<a class="headerlink" href="#binvi" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Single-Bit Invert (Immediate)</p>
</dd>
<dt>Mnemonic</dt><dd><p>binvi <em>rd</em>, <em>rs1</em>, <em>shamt</em></p>
</dd>
</dl>
<p>Encoding (RV32)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BINV'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x34</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BINVI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<p>Encoding (RV64)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BINV'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BINVI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns <em>rs1</em> with a single bit inverted at the
index specified in <em>shamt</em>. The index is read from the lower
log2(XLEN) bits of <em>shamt</em>. For RV32, the encodings corresponding to
shamt[5]=1 are reserved.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let index = shamt &amp; (XLEN - 1);
X(rd) = X(rs1) ^ (1 &lt;&lt; index)
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbs (<a class="reference external" href="#zbs">Single-bit
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="bset">
<span id="insns-bset"></span><h3 id="bset">bset<a class="headerlink" href="#bset" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Single-Bit Set (Register)</p>
</dd>
<dt>Mnemonic</dt><dd><p>bset <em>rd</em>, <em>rs1</em>,<em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BSET'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x14</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BSET'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns <em>rs1</em> with a single bit set at the index
specified in <em>rs2</em>. The index is read from the lower log2(XLEN) bits
of <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let index = X(rs2) &amp; (XLEN - 1);
X(rd) = X(rs1) | (1 &lt;&lt; index)
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbs (<a class="reference external" href="#zbs">Single-bit
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="bseti">
<span id="insns-bseti"></span><h3 id="bseti">bseti<a class="headerlink" href="#bseti" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Single-Bit Set (Immediate)</p>
</dd>
<dt>Mnemonic</dt><dd><p>bseti <em>rd</em>, <em>rs1</em>,<em>shamt</em></p>
</dd>
</dl>
<p>Encoding (RV32)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BSETI'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x14</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BSETI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<p>Encoding (RV64)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BSETI'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'BSETI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns <em>rs1</em> with a single bit set at the index
specified in <em>shamt</em>. The index is read from the lower log2(XLEN)
bits of <em>shamt</em>. For RV32, the encodings corresponding to shamt[5]=1
are reserved.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let index = shamt &amp; (XLEN - 1);
X(rd) = X(rs1) | (1 &lt;&lt; index)
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbs (<a class="reference external" href="#zbs">Single-bit
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="clmul">
<span id="insns-clmul"></span><h3 id="clmul">clmul<a class="headerlink" href="#clmul" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Carry-less multiply (low-part)</p>
</dd>
<dt>Mnemonic</dt><dd><p>clmul <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLMUL'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MINMAX/CLMUL'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>clmul produces the lower half of the 2·XLEN carry-less product.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1_val = X(rs1);
let rs2_val = X(rs2);
let output : xlenbits = 0;

foreach (i from 0 to (xlen - 1) by 1) {
   output = if   ((rs2_val &gt;&gt; i) &amp; 1)
            then output ^ (rs1_val &lt;&lt; i);
            else output;
}

X[rd] = output
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbc (<a class="reference external" href="#zbc">Carry-less
multiplication</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkc (<a class="reference external" href="#zbkc">Carry-less multiplication
for Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="clmulh">
<span id="insns-clmulh"></span><h3 id="clmulh">clmulh<a class="headerlink" href="#clmulh" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Carry-less multiply (high-part)</p>
</dd>
<dt>Mnemonic</dt><dd><p>clmulh <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLMULH'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MINMAX/CLMUL'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>clmulh produces the upper half of the 2·XLEN carry-less product.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1_val = X(rs1);
let rs2_val = X(rs2);
let output : xlenbits = 0;

foreach (i from 1 to xlen by 1) {
   output = if   ((rs2_val &gt;&gt; i) &amp; 1)
            then output ^ (rs1_val &gt;&gt; (xlen - i));
            else output;
}

X[rd] = output
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbc (<a class="reference external" href="#zbc">Carry-less
multiplication</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkc (<a class="reference external" href="#zbkc">Carry-less multiplication
for Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="clmulr">
<span id="insns-clmulr"></span><h3 id="clmulr">clmulr<a class="headerlink" href="#clmulr" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Carry-less multiply (reversed)</p>
</dd>
<dt>Mnemonic</dt><dd><p>clmulr <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x2</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLMULR'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MINMAX/CLMUL'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p><strong>clmulr</strong> produces bits 2·XLEN−2:XLEN-1 of the 2·XLEN carry-less
product.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1_val = X(rs1);
let rs2_val = X(rs2);
let output : xlenbits = 0;

foreach (i from 0 to (xlen - 1) by 1) {
   output = if   ((rs2_val &gt;&gt; i) &amp; 1)
            then output ^ (rs1_val &gt;&gt; (xlen - i - 1));
            else output;
}

X[rd] = output
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>clmulr</strong> instruction is used to accelerate CRC calculations.
The <strong>r</strong> in the instruction’s mnemonic stands for <em>reversed</em>, as the
instruction is equivalent to bit-reversing the inputs, performing a
<strong>clmul</strong>, then bit-reversing the output.</p>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbc (<a class="reference external" href="#zbc">Carry-less
multiplication</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="clz">
<span id="insns-clz"></span><h3 id="clz">clz<a class="headerlink" href="#clz" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Count leading zero bits</p>
</dd>
<dt>Mnemonic</dt><dd><p>clz <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLZ'</span><span class="p">]</span>  <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x0</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLZ'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLZ'</span><span class="p">]</span>  <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction counts the number of 0’s before the first 1,
starting at the most-significant bit (i.e., XLEN-1) and progressing
to bit 0. Accordingly, if the input is 0, the output is XLEN, and if
the most-significant bit of the input is a 1, the output is 0.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>val HighestSetBit : forall ('N : Int), 'N &gt;= 0. bits('N) -&gt; int

function HighestSetBit x = {
  foreach (i from (xlen - 1) to 0 by 1 in dec)
    if [x[i]] == 0b1 then return(i) else ();
  return -1;
}

let rs = X(rs);
X[rd] = (xlen - 1) - HighestSetBit(rs);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="clzw">
<span id="insns-clzw"></span><h3 id="clzw">clzw<a class="headerlink" href="#clzw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Count leading zero bits in word</p>
</dd>
<dt>Mnemonic</dt><dd><p>clzw <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLZW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x0</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLZW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CLZW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction counts the number of 0’s before the first 1 starting
at bit 31 and progressing to bit 0. Accordingly, if the
least-significant word is 0, the output is 32, and if the
most-significant bit of the word (i.e., bit 31) is a 1, the output is
0.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>val HighestSetBit32 : forall ('N : Int), 'N &gt;= 0. bits('N) -&gt; int

function HighestSetBit32 x = {
  foreach (i from 31 to 0 by 1 in dec)
    if [x[i]] == 0b1 then return(i) else ();
  return -1;
}

let rs = X(rs);
X[rd] = 31 - HighestSetBit(rs);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cpop">
<span id="insns-cpop"></span><h3 id="cpop">cpop<a class="headerlink" href="#cpop" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Count set bits</p>
</dd>
<dt>Mnemonic</dt><dd><p>cpop <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CPOP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x2</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CPOP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CPOP'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instructions counts the number of 1’s (i.e., set bits) in the
source register.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let bitcount = 0;
let rs = X(rs);

foreach (i from 0 to (xlen - 1) in inc)
    if rs[i] == 0b1 then bitcount = bitcount + 1 else ();

X[rd] = bitcount
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operations is known as population count, popcount, sideways sum,
bit summation, or Hamming weight.</p>
<p>The GCC builtin function <code class="docutils literal notranslate"><span class="pre">__builtin_popcount</span> <span class="pre">(unsigned</span> <span class="pre">int</span> <span class="pre">x)</span></code> is
implemented by cpop on RV32 and by <strong>cpopw</strong> on RV64. The GCC builtin
function <code class="docutils literal notranslate"><span class="pre">__builtin_popcountl</span> <span class="pre">(unsigned</span> <span class="pre">long</span> <span class="pre">x)</span></code> for LP64 is
implemented by <strong>cpop</strong> on RV64.</p>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cpopw">
<span id="insns-cpopw"></span><h3 id="cpopw">cpopw<a class="headerlink" href="#cpopw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Count set bits in word</p>
</dd>
<dt>Mnemonic</dt><dd><p>cpopw <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CPOPW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x2</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CPOPW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CPOPW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instructions counts the number of 1’s (i.e., set bits) in the
least-significant word of the source register.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let bitcount = 0;
let val = X(rs);

foreach (i from 0 to 31 in inc)
    if val[i] == 0b1 then bitcount = bitcount + 1 else ();

X[rd] = bitcount
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ctz">
<span id="insns-ctz"></span><h3 id="ctz">ctz<a class="headerlink" href="#ctz" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Count trailing zeros</p>
</dd>
<dt>Mnemonic</dt><dd><p>ctz <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CTZ/CTZW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CTZ/CTZW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CTZ/CTZW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction counts the number of 0’s before the first 1,
starting at the least-significant bit (i.e., 0) and progressing to
the most-significant bit (i.e., XLEN-1). Accordingly, if the input is
0, the output is XLEN, and if the least-significant bit of the input
is a 1, the output is 0.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>val LowestSetBit : forall ('N : Int), 'N &gt;= 0. bits('N) -&gt; int

function LowestSetBit x = {
  foreach (i from 0 to (xlen - 1) by 1 in dec)
    if [x[i]] == 0b1 then return(i) else ();
  return xlen;
}

let rs = X(rs);
X[rd] = LowestSetBit(rs);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ctzw">
<span id="insns-ctzw"></span><h3 id="ctzw">ctzw<a class="headerlink" href="#ctzw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Count trailing zero bits in word</p>
</dd>
<dt>Mnemonic</dt><dd><p>ctzw <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CTZ/CTZW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CTZ/CTZW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'CTZ/CTZW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction counts the number of 0’s before the first 1,
starting at the least-significant bit (i.e., 0) and progressing to
the most-significant bit of the least-significant word (i.e., 31).
Accordingly, if the least-significant word is 0, the output is 32,
and if the least-significant bit of the input is a 1, the output is
0.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>val LowestSetBit32 : forall ('N : Int), 'N &gt;= 0. bits('N) -&gt; int

function LowestSetBit32 x = {
  foreach (i from 0 to 31 by 1 in dec)
    if [x[i]] == 0b1 then return(i) else ();
  return 32;
}

let rs = X(rs);
X[rd] = LowestSetBit32(rs);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="max">
<span id="insns-max"></span><h3 id="max">max<a class="headerlink" href="#max" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Maximum</p>
</dd>
<dt>Mnemonic</dt><dd><p>max <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x6</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MAX'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x05</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MINMAX/CLMUL'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns the larger of two signed integers.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1_val = X(rs1);
let rs2_val = X(rs2);

let result = if   rs1_val &lt;_s rs2_val
             then rs2_val
             else rs1_val;

X(rd) = result;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calculating the absolute value of a signed integer can be performed
using the following sequence: <strong>neg rD,rS</strong> followed by <strong>max
rD,rS,rD</strong>. When using this common sequence, it is suggested that
they are scheduled with no intervening instructions so that
implementations that are so optimized can fuse them together.</p>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="maxu">
<span id="insns-maxu"></span><h3 id="maxu">maxu<a class="headerlink" href="#maxu" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Unsigned maximum</p>
</dd>
<dt>Mnemonic</dt><dd><p>maxu <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x7</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MAXU'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x05</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MINMAX/CLMUL'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns the larger of two unsigned integers.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1_val = X(rs1);
let rs2_val = X(rs2);

let result = if   rs1_val &lt;_u rs2_val
             then rs2_val
             else rs1_val;

X(rd) = result;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="min">
<span id="insns-min"></span><h3 id="min">min<a class="headerlink" href="#min" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Minimum</p>
</dd>
<dt>Mnemonic</dt><dd><p>min <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MIN'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x05</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MINMAX/CLMUL'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns the smaller of two signed integers.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1_val = X(rs1);
let rs2_val = X(rs2);

let result = if   rs1_val &lt;_s rs2_val
             then rs1_val
             else rs2_val;

X(rd) = result;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="minu">
<span id="insns-minu"></span><h3 id="minu">minu<a class="headerlink" href="#minu" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Unsigned minimum</p>
</dd>
<dt>Mnemonic</dt><dd><p>minu <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MINU'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x05</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'MINMAX/CLMUL'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction returns the smaller of two unsigned integers.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1_val = X(rs1);
let rs2_val = X(rs2);

let result = if   rs1_val &lt;_u rs2_val
             then rs1_val
             else rs2_val;

X(rd) = result;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="orc-b">
<span id="insns-orc-b"></span><h3 id="orc-b">orc.b<a class="headerlink" href="#orc-b" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Bitwise OR-Combine, byte granule</p>
</dd>
<dt>Mnemonic</dt><dd><p>orc.b <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x287</span> <span class="p">}</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>Combines the bits within each byte using bitwise logical OR. This
sets the bits of each byte in the result <em>rd</em> to all zeros if no bit
within the respective byte of <em>rs</em> is set, or to all ones if any bit
within the respective byte of <em>rs</em> is set.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let input = X(rs);
let output : xlenbits = 0;

foreach (i from 0 to (xlen - 8) by 8) {
   output[(i + 7)..i] = if   input[(i + 7)..i] == 0
                        then 0b00000000
                        else 0b11111111;
}

X[rd] = output;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="orn">
<span id="insns-orn"></span><h3 id="orn">orn<a class="headerlink" href="#orn" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>OR with inverted operand</p>
</dd>
<dt>Mnemonic</dt><dd><p>orn <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x6</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ORN'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x20</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ORN'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs the bitwise logical OR operation between
<em>rs1</em> and the bitwise inversion of <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = X(rs1) | ~X(rs2);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="pack">
<span id="insns-pack"></span><h3 id="pack">pack<a class="headerlink" href="#pack" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Pack the low halves of <em>rs1</em> and <em>rs2</em> into <em>rd</em>.</p>
</dd>
<dt>Mnemonic</dt><dd><p>pack <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span><span class="p">},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:[</span><span class="s1">'PACK'</span><span class="p">]},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span><span class="p">},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span><span class="p">},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:[</span><span class="s1">'PACK'</span><span class="p">]},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>The pack instruction packs the XLEN/2-bit lower halves of <em>rs1</em> and
<em>rs2</em> into <em>rd</em>, with <em>rs1</em> in the lower half and <em>rs2</em> in the upper
half.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let lo_half : bits(xlen/2) = X(rs1)[xlen/2-1..0];
let hi_half : bits(xlen/2) = X(rs2)[xlen/2-1..0];
X(rd) = EXTZ(hi_half @ lo_half);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="packh">
<span id="insns-packh"></span><h3 id="packh">packh<a class="headerlink" href="#packh" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Pack the low bytes of <em>rs1</em> and <em>rs2</em> into <em>rd</em>.</p>
</dd>
<dt>Mnemonic</dt><dd><p>packh <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span><span class="p">},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x7</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'PACKH'</span><span class="p">]},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span><span class="p">},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span><span class="p">},</span>
    <span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'PACKH'</span><span class="p">]},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>And the packh instruction packs the least-significant bytes of <em>rs1</em>
and <em>rs2</em> into the 16 least-significant bits of <em>rd</em>, zero extending
the rest of <em>rd</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let lo_half : bits(8) = X(rs1)[7..0];
let hi_half : bits(8) = X(rs2)[7..0];
X(rd) = EXTZ(hi_half @ lo_half);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="packw">
<span id="insns-packw"></span><h3 id="packw">packw<a class="headerlink" href="#packw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Pack the low 16-bits of <em>rs1</em> and <em>rs2</em> into <em>rd</em> on RV64.</p>
</dd>
<dt>Mnemonic</dt><dd><p>packw <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0xe</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction packs the low 16 bits of <em>rs1</em> and <em>rs2</em> into the 32
least-significant bits of <em>rd</em>, sign extending the 32-bit result to
the rest of <em>rd</em>. This instruction only exists on RV64 based systems.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let lo_half : bits(16) = X(rs1)[15..0];
let hi_half : bits(16) = X(rs2)[15..0];
X(rd) = EXTS(hi_half @ lo_half);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rev8">
<span id="insns-rev8"></span><h3 id="rev8">rev8<a class="headerlink" href="#rev8" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Byte-reverse register</p>
</dd>
<dt>Mnemonic</dt><dd><p>rev8 <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding (RV32)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x698</span> <span class="p">}</span>
<span class="p">]}</span>
</pre></div>
</div>
<p>Encoding (RV64)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x6b8</span> <span class="p">}</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction reverses the order of the bytes in <em>rs</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let input = X(rs);
let output : xlenbits = 0;
let j = xlen - 1;

foreach (i from 0 to (xlen - 8) by 8) {
   output[i..(i + 7)] = input[(j - 7)..j];
   j = j - 8;
}

X[rd] = output
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>rev8</strong> mnemonic corresponds to different instruction encodings
in RV32 and RV64.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The byte-reverse operation is only available for the full register
width. To emulate word-sized and halfword-sized byte-reversal,
perform a <code class="docutils literal notranslate"><span class="pre">rev8</span> <span class="pre">rd,rs</span></code> followed by a <code class="docutils literal notranslate"><span class="pre">srai</span> <span class="pre">rd,rd,K</span></code>, where K is
XLEN-32 and XLEN-16, respectively.</p>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rev-b">
<span id="insns-revb"></span><h3 id="rev-b">rev.b<a class="headerlink" href="#rev-b" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Reverse the bits in each byte of a source register.</p>
</dd>
<dt>Mnemonic</dt><dd><p>rev.b <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x687</span> <span class="p">}</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction reverses the order of the bits in every byte of a
register.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>result : xlenbits = EXTZ(0b0);
foreach (i from 0 to sizeof(xlen) by 8) {
    result[i+7..i] = reverse_bits_in_byte(X(rs1)[i+7..i]);
};
X(rd) = result;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rol">
<span id="insns-rol"></span><h3 id="rol">rol<a class="headerlink" href="#rol" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Rotate Left (Register)</p>
</dd>
<dt>Mnemonic</dt><dd><p>rol <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ROL'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ROL'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs a rotate left of <em>rs1</em> by the amount in
least-significant log2(XLEN) bits of <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let shamt = if   xlen == 32
            then X(rs2)[4..0]
            else X(rs2)[5..0];
let result = (X(rs1) &lt;&lt; shamt) | (X(rs1) &gt;&gt; (xlen - shamt));

X(rd) = result;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rolw">
<span id="insns-rolw"></span><h3 id="rolw">rolw<a class="headerlink" href="#rolw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Rotate Left Word (Register)</p>
</dd>
<dt>Mnemonic</dt><dd><p>rolw <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ROLW'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ROLW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs a rotate left on the least-significant word
of <em>rs1</em> by the amount in least-significant 5 bits of <em>rs2</em>. The
resulting word value is sign-extended by copying bit 31 to all of the
more-significant bits.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1 = EXTZ(X(rs1)[31..0])
let shamt = X(rs2)[4..0];
let result = (rs1 &lt;&lt; shamt) | (rs1 &gt;&gt; (32 - shamt));
X(rd) = EXTS(result[31..0]);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ror">
<span id="insns-ror"></span><h3 id="ror">ror<a class="headerlink" href="#ror" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Rotate Right</p>
</dd>
<dt>Mnemonic</dt><dd><p>ror <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ROR'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ROR'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs a rotate right of <em>rs1</em> by the amount in
least-significant log2(XLEN) bits of <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let shamt = if   xlen == 32
            then X(rs2)[4..0]
            else X(rs2)[5..0];
let result = (X(rs1) &gt;&gt; shamt) | (X(rs1) &lt;&lt; (xlen - shamt));

X(rd) = result;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rori">
<span id="insns-rori"></span><h3 id="rori">rori<a class="headerlink" href="#rori" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Rotate Right (Immediate)</p>
</dd>
<dt>Mnemonic</dt><dd><p>rori <em>rd</em>, <em>rs1</em>, <em>shamt</em></p>
</dd>
</dl>
<p>Encoding (RV32)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'RORI'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'RORI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<p>Encoding (RV64)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'RORI'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x18</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'RORI'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs a rotate right of <em>rs1</em> by the amount in
the least-significant log2(XLEN) bits of <em>shamt</em>. For RV32, the
encodings corresponding to shamt[5]=1 are reserved.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let shamt = if   xlen == 32
            then shamt[4..0]
            else shamt[5..0];
let result = (X(rs1) &gt;&gt; shamt) | (X(rs1) &lt;&lt; (xlen - shamt));

X(rd) = result;
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="roriw">
<span id="insns-roriw"></span><h3 id="roriw">roriw<a class="headerlink" href="#roriw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Rotate Right Word by Immediate</p>
</dd>
<dt>Mnemonic</dt><dd><p>roriw <em>rd</em>, <em>rs1</em>, <em>shamt</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'RORIW'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'RORIW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs a rotate right on the least-significant
word of <em>rs1</em> by the amount in the least-significant log2(XLEN) bits
of <em>shamt</em>. The resulting word value is sign-extended by copying bit
31 to all of the more-significant bits.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1_data = EXTZ(X(rs1)[31..0];
let result = (rs1_data &gt;&gt; shamt) | (rs1_data &lt;&lt; (32 - shamt));
X(rd) = EXTS(result[31..0]);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rorw">
<span id="insns-rorw"></span><h3 id="rorw">rorw<a class="headerlink" href="#rorw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Rotate Right Word (Register)</p>
</dd>
<dt>Mnemonic</dt><dd><p>rorw <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'RORW'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'RORW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs a rotate right on the least-significant
word of <em>rs1</em> by the amount in least-significant 5 bits of <em>rs2</em>. The
resultant word is sign-extended by copying bit 31 to all of the
more-significant bits.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let rs1 = EXTZ(X(rs1)[31..0])
let shamt = X(rs2)[4..0];
let result = (rs1 &gt;&gt; shamt) | (rs1 &lt;&lt; (32 - shamt));
X(rd) = EXTS(result);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sext-b">
<span id="insns-sext-b"></span><h3 id="sext-b">sext.b<a class="headerlink" href="#sext-b" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Sign-extend byte</p>
</dd>
<dt>Mnemonic</dt><dd><p>sext.b <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SEXT.B/SEXT.H'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x04</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SEXT.B'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction sign-extends the least-significant byte in the
source to XLEN by copying the most-significant bit in the byte (i.e.,
bit 7) to all of the more-significant bits.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = EXTS(X(rs)[7..0]);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sext-h">
<span id="insns-sext-h"></span><h3 id="sext-h">sext.h<a class="headerlink" href="#sext-h" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Sign-extend halfword</p>
</dd>
<dt>Mnemonic</dt><dd><p>sext.h <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SEXT.B/SEXT.H'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x05</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SEXT.H'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x30</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction sign-extends the least-significant halfword in <em>rs</em>
to XLEN by copying the most-significant bit in the halfword (i.e.,
bit 15) to all of the more-significant bits.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = EXTS(X(rs)[15..0]);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sh1add">
<span id="insns-sh1add"></span><h3 id="sh1add">sh1add<a class="headerlink" href="#sh1add" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Shift left by 1 and add</p>
</dd>
<dt>Mnemonic</dt><dd><p>sh1add <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x2</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH1ADD'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x10</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH1ADD'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction shifts <em>rs1</em> to the left by 1 bit and adds it to
<em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = X(rs2) + (X(rs1) &lt;&lt; 1);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zba (<a class="reference external" href="#zba">Address generation
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sh1add-uw">
<span id="insns-sh1add-uw"></span><h3 id="sh1add-uw">sh1add.uw<a class="headerlink" href="#sh1add-uw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Shift unsigned word left by 1 and add</p>
</dd>
<dt>Mnemonic</dt><dd><p>sh1add.uw <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x2</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH1ADD.UW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x10</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH1ADD.UW'</span><span class="p">]</span>  <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs an XLEN-wide addition of two addends. The
first addend is <em>rs2</em>. The second addend is the unsigned value formed
by extracting the least-significant word of <em>rs1</em> and shifting it
left by 1 place.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let base = X(rs2);
let index = EXTZ(X(rs1)[31..0]);

X(rd) = base + (index &lt;&lt; 1);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zba (<a class="reference external" href="#zba">Address generation
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sh2add">
<span id="insns-sh2add"></span><h3 id="sh2add">sh2add<a class="headerlink" href="#sh2add" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Shift left by 2 and add</p>
</dd>
<dt>Mnemonic</dt><dd><p>sh2add <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH2ADD'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x10</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH2ADD'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction shifts <em>rs1</em> to the left by 2 places and adds it to
<em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = X(rs2) + (X(rs1) &lt;&lt; 2);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zba (<a class="reference external" href="#zba">Address generation
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sh2add-uw">
<span id="insns-sh2add-uw"></span><h3 id="sh2add-uw">sh2add.uw<a class="headerlink" href="#sh2add-uw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Shift unsigned word left by 2 and add</p>
</dd>
<dt>Mnemonic</dt><dd><p>sh2add.uw <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH2ADD.UW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x10</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH2ADD.UW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs an XLEN-wide addition of two addends. The
first addend is <em>rs2</em>. The second addend is the unsigned value formed
by extracting the least-significant word of <em>rs1</em> and shifting it
left by 2 places.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let base = X(rs2);
let index = EXTZ(X(rs1)[31..0]);

X(rd) = base + (index &lt;&lt; 2);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zba (<a class="reference external" href="#zba">Address generation
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sh3add">
<span id="insns-sh3add"></span><h3 id="sh3add">sh3add<a class="headerlink" href="#sh3add" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Shift left by 3 and add</p>
</dd>
<dt>Mnemonic</dt><dd><p>sh3add <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x6</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH3ADD'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x10</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH3ADD'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction shifts <em>rs1</em> to the left by 3 places and adds it to
<em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = X(rs2) + (X(rs1) &lt;&lt; 3);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zba (<a class="reference external" href="#zba">Address generation
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sh3add-uw">
<span id="insns-sh3add-uw"></span><h3 id="sh3add-uw">sh3add.uw<a class="headerlink" href="#sh3add-uw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Shift unsigned word left by 3 and add</p>
</dd>
<dt>Mnemonic</dt><dd><p>sh3add.uw <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x6</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH3ADD.UW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x10</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SH3ADD.UW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs an XLEN-wide addition of two addends. The
first addend is <em>rs2</em>. The second addend is the unsigned value formed
by extracting the least-significant word of <em>rs1</em> and shifting it
left by 3 places.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>let base = X(rs2);
let index = EXTZ(X(rs1)[31..0]);

X(rd) = base + (index &lt;&lt; 3);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zba (<a class="reference external" href="#zba">Address generation
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="slli-uw">
<span id="insns-slli-uw"></span><h3 id="slli-uw">slli.uw<a class="headerlink" href="#slli-uw" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Shift-left unsigned word (Immediate)</p>
</dd>
<dt>Mnemonic</dt><dd><p>slli.uw <em>rd</em>, <em>rs1</em>, <em>shamt</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-IMM-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SLLI.UW'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'shamt'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x02</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'SLLI.UW'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction takes the least-significant word of <em>rs1</em>,
zero-extends it, and shifts it left by the immediate.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = (EXTZ(X(rs)[31..0]) &lt;&lt; shamt);
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zba (<a class="reference external" href="#zba">Address generation
instructions</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This instruction is the same as <strong>slli</strong> with <strong>zext.w</strong> performed on
<em>rs1</em> before shifting.</p>
</div>
</section>
<section id="unzip">
<span id="insns-unzip"></span><h3 id="unzip">unzip<a class="headerlink" href="#unzip" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Implements the inverse of the zip instruction.</p>
</dd>
<dt>Mnemonic</dt><dd><p>unzip <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x5</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1f</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction gathers bits from the high and low halves of the
source word into odd/even bit positions in the destination word. It
is the inverse of the <a class="reference external" href="#insns-zip">zip</a> instruction. This
instruction is available only on RV32.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>foreach (i from 0 to xlen/2-1) {
  X(rd)[i] = X(rs1)[2*i]
  X(rd)[i+xlen/2] = X(rs1)[2*i+1]
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This instruction is useful for implementing the SHA3 cryptographic
hash function on a 32-bit architecture, as it implements the
bit-interleaving operation used to speed up the 64-bit rotations
directly.</p>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>) (RV32)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="xnor">
<span id="insns-xnor"></span><h3 id="xnor">xnor<a class="headerlink" href="#xnor" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Exclusive NOR</p>
</dd>
<dt>Mnemonic</dt><dd><p>xnor <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'XNOR'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x20</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'XNOR'</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction performs the bit-wise exclusive-NOR operation on
<em>rs1</em> and <em>rs2</em>.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = ~(X(rs1) ^ X(rs2));
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
<tr class="row-odd"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="xperm-b">
<span id="insns-xpermb"></span><h3 id="xperm-b">xperm.b<a class="headerlink" href="#xperm-b" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Byte-wise lookup of indices into a vector in registers.</p>
</dd>
<dt>Mnemonic</dt><dd><p>xperm.b <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0xc</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x14</span><span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>The xperm.b instruction operates on bytes. The <em>rs1</em> register
contains a vector of XLEN/8 8-bit elements. The <em>rs2</em> register
contains a vector of XLEN/8 8-bit indexes. The result is each element
in <em>rs2</em> replaced by the indexed element in <em>rs1</em>, or zero if the
index into <em>rs2</em> is out of bounds.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>val xpermb_lookup : (bits(8), xlenbits) -&gt; bits(8)
function xpermb_lookup (idx, lut) = {
    (lut &gt;&gt; (idx @ 0b000))[7..0]
}

function clause execute ( XPERM_B (rs2,rs1,rd)) = {
    result : xlenbits = EXTZ(0b0);
    foreach(i from 0 to xlen by 8) {
        result[i+7..i] = xpermn_lookup(X(rs2)[i+7..i], X(rs1));
    };
    X(rd) = result;
    RETIRE_SUCCESS
}
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbkx (<a class="reference external" href="#zbkx">Crossbar
permutations</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="xperm-n">
<span id="insns-xpermn"></span><h3 id="xperm-n">xperm.n<a class="headerlink" href="#xperm-n" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Nibble-wise lookup of indices into a vector.</p>
</dd>
<dt>Mnemonic</dt><dd><p>xperm.n <em>rd</em>, <em>rs1</em>, <em>rs2</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0xc</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x2</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs2'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x14</span><span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>The xperm.n instruction operates on nibbles. The <em>rs1</em> register
contains a vector of XLEN/4 4-bit elements. The <em>rs2</em> register
contains a vector of XLEN/4 4-bit indexes. The result is each element
in <em>rs2</em> replaced by the indexed element in <em>rs1</em>, or zero if the
index into <em>rs2</em> is out of bounds.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>val xpermn_lookup : (bits(4), xlenbits) -&gt; bits(4)
function xpermn_lookup (idx, lut) = {
    (lut &gt;&gt; (idx @ 0b00))[3..0]
}

function clause execute ( XPERM_N (rs2,rs1,rd)) = {
    result : xlenbits = EXTZ(0b0);
    foreach(i from 0 to xlen by 4) {
        result[i+3..i] = xpermn_lookup(X(rs2)[i+3..i], X(rs1));
    };
    X(rd) = result;
    RETIRE_SUCCESS
}
</pre></div>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbkx (<a class="reference external" href="#zbkx">Crossbar
permutations</a>)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="zext-h">
<span id="insns-zext-h"></span><h3 id="zext-h">zext.h<a class="headerlink" href="#zext-h" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Zero-extend halfword</p>
</dd>
<dt>Mnemonic</dt><dd><p>zext.h <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding (RV32)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x33</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ZEXT.H'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x00</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x04</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<p>Encoding (RV64)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OP-32'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="s1">'ZEXT.H'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x00</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">bits</span><span class="p">:</span>  <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x04</span> <span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction zero-extends the least-significant halfword of the
source to XLEN by inserting 0’s into all of the bits more significant
than 15.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>X(rd) = EXTZ(X(rs)[15..0]);
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>zext.h</strong> mnemonic corresponds to different instruction
encodings in RV32 and RV64.</p>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbb (<a class="reference external" href="#zbb">Basic
bit-manipulation</a>)</p></td>
<td><p>0.93</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
<section id="zip">
<span id="insns-zip"></span><h3 id="zip">zip<a class="headerlink" href="#zip" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Synopsis</dt><dd><p>Gather odd and even bits of the source word into upper/lower halves
of the destination.</p>
</dd>
<dt>Mnemonic</dt><dd><p>zip <em>rd</em>, <em>rs</em></p>
</dd>
</dl>
<p>Encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">image</span><span class="p">:</span> <span class="n">no</span> <span class="n">implicit</span> <span class="n">conversion</span> <span class="n">of</span> <span class="n">nil</span> <span class="n">into</span> <span class="n">String</span>
<span class="p">{</span><span class="n">reg</span><span class="p">:[</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x3</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rd'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">'rs1'</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x1e</span><span class="p">},</span>
<span class="p">{</span><span class="n">bits</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="mh">0x4</span><span class="p">},</span>
<span class="p">]}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Description</dt><dd><p>This instruction scatters all of the odd and even bits of a source
word into the high and low halves of a destination word. It is the
inverse of the <a class="reference external" href="#insns-unzip">unzip</a> instruction. This instruction
is available only on RV32.</p>
</dd>
</dl>
<p>Operation</p>
<div class="highlight-sail notranslate"><div class="highlight"><pre><span></span>foreach (i from 0 to xlen/2-1) {
  X(rd)[2*i] = X(rs1)[i]
  X(rd)[2*i+1] = X(rs1)[i+xlen/2]
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This instruction is useful for implementing the SHA3 cryptographic
hash function on a 32-bit architecture, as it implements the
bit-interleaving operation used to speed up the 64-bit rotations
directly.</p>
</div>
<p>Included in</p>
<table>
<colgroup>
<col style="width: 51%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Minimum version</p></th>
<th class="head"><p>Lifecycle state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Zbkb (<a class="reference external" href="#zbkb">Bit-manipulation for
Cryptography</a>) (RV32)</p></td>
<td><p>v0.9.4</p></td>
<td><p>Frozen</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="software-optimization-guide">
<h2 id="software-optimization-guide">Software optimization guide<a class="headerlink" href="#software-optimization-guide" title="Permalink to this headline">¶</a></h2>
<section id="strlen">
<h3 id="strlen">strlen<a class="headerlink" href="#strlen" title="Permalink to this headline">¶</a></h3>
<p>The <strong>orc.b</strong> instruction allows for the efficient detection of <strong>NUL</strong>
bytes in an XLEN-sized chunk of data:</p>
<ul class="simple">
<li><p>the result of <strong>orc.b</strong> on a chunk that does not contain any <strong>NUL</strong>
bytes will be all-ones, and</p></li>
<li><p>after a bitwise-negation of the result of <strong>orc.b</strong>, the number of
data bytes before the first <strong>NUL</strong> byte (if any) can be detected by
<strong>ctz</strong>/<strong>clz</strong> (depending on the endianness of data).</p></li>
</ul>
<p>A full example of a <strong>strlen</strong> function, which uses these techniques and
also demonstrates the use of it for unaligned/partial data, is the
following:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;sys/asm.h&gt;</span>

<span class="w">    </span><span class="na">.text</span><span class="w"></span>
<span class="w">    </span><span class="na">.globl</span><span class="w"> </span><span class="no">strlen</span><span class="w"></span>
<span class="w">    </span><span class="na">.type</span><span class="w">  </span><span class="no">strlen</span><span class="p">,</span><span class="w"> </span><span class="na">@function</span><span class="w"></span>
<span class="nl">strlen:</span><span class="w"></span>
<span class="w">    </span><span class="nf">andi</span><span class="w">    </span><span class="no">a3</span><span class="p">,</span><span class="w"> </span><span class="no">a0</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="no">SZREG-1</span><span class="p">)</span><span class="w">   </span><span class="c1">// offset</span>
<span class="w">    </span><span class="nf">andi</span><span class="w">    </span><span class="no">a1</span><span class="p">,</span><span class="w"> </span><span class="no">a0</span><span class="p">,</span><span class="w"> </span><span class="p">-</span><span class="no">SZREG</span><span class="w">      </span><span class="c1">// align pointer</span>
<span class="nl">.Lprologue:</span><span class="w"></span>
<span class="w">    </span><span class="nf">li</span><span class="w">      </span><span class="no">a4</span><span class="p">,</span><span class="w"> </span><span class="no">SZREG</span><span class="w"></span>
<span class="w">    </span><span class="nf">sub</span><span class="w">     </span><span class="no">a4</span><span class="p">,</span><span class="w"> </span><span class="no">a4</span><span class="p">,</span><span class="w"> </span><span class="no">a3</span><span class="w">          </span><span class="c1">// XLEN - offset</span>
<span class="w">    </span><span class="nf">slli</span><span class="w">    </span><span class="no">a3</span><span class="p">,</span><span class="w"> </span><span class="no">a3</span><span class="p">,</span><span class="w"> </span><span class="no">PTRLOG</span><span class="w">      </span><span class="c1">// offset * 8</span>
<span class="w">    </span><span class="nf">REG_L</span><span class="w">   </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">(</span><span class="no">a1</span><span class="p">)</span><span class="w">           </span><span class="c1">// chunk</span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">     * Shift the partial/unaligned chunk we loaded to remove the bytes</span>
<span class="cm">     * from before the start of the string, adding NUL bytes at the end.</span>
<span class="cm">     */</span><span class="w"></span>
<span class="c1">#if __BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__</span>
<span class="w">    </span><span class="nf">srl</span><span class="w"> </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"> </span><span class="p">,</span><span class="no">a3</span><span class="w">          </span><span class="c1">// chunk &gt;&gt; (offset * 8)</span>
<span class="c1">#else</span>
<span class="w">    </span><span class="nf">sll</span><span class="w">     </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a3</span><span class="w"></span>
<span class="c1">#endif</span>
<span class="w">    </span><span class="nf">orc.b</span><span class="w">   </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="w">    </span><span class="nf">not</span><span class="w"> </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">     * Non-NUL bytes in the string have been expanded to 0x00, while</span>
<span class="cm">     * NUL bytes have become 0xff.  Search for the first set bit</span>
<span class="cm">     * (corresponding to a NUL byte in the original chunk).</span>
<span class="cm">     */</span><span class="w"></span>
<span class="c1">#if __BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__</span>
<span class="w">    </span><span class="nf">ctz</span><span class="w">     </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="c1">#else</span>
<span class="w">    </span><span class="nf">clz</span><span class="w">     </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="c1">#endif</span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">     * The first chunk is special: compare against the number of valid</span>
<span class="cm">     * bytes in this chunk.</span>
<span class="cm">     */</span><span class="w"></span>
<span class="w">    </span><span class="nf">srli</span><span class="w">    </span><span class="no">a0</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"></span>
<span class="w">    </span><span class="nf">bgtu</span><span class="w">    </span><span class="no">a4</span><span class="p">,</span><span class="w"> </span><span class="no">a0</span><span class="p">,</span><span class="w"> </span><span class="no">.Ldone</span><span class="w"></span>
<span class="w">    </span><span class="nf">addi</span><span class="w">    </span><span class="no">a3</span><span class="p">,</span><span class="w"> </span><span class="no">a1</span><span class="p">,</span><span class="w"> </span><span class="no">SZREG</span><span class="w"></span>
<span class="w">    </span><span class="nf">li</span><span class="w">      </span><span class="no">a4</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="w"></span>
<span class="w">    </span><span class="na">.align</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">     * Our critical loop is 4 instructions and processes data in 4 byte</span>
<span class="cm">     * or 8 byte chunks.</span>
<span class="cm">     */</span><span class="w"></span>
<span class="nl">.Lloop:</span><span class="w"></span>
<span class="w">    </span><span class="nf">REG_L</span><span class="w">   </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">SZREG</span><span class="p">(</span><span class="no">a1</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">addi</span><span class="w">    </span><span class="no">a1</span><span class="p">,</span><span class="w"> </span><span class="no">a1</span><span class="p">,</span><span class="w"> </span><span class="no">SZREG</span><span class="w"></span>
<span class="w">    </span><span class="nf">orc.b</span><span class="w">   </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="w">    </span><span class="nf">beq</span><span class="w">     </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a4</span><span class="p">,</span><span class="w"> </span><span class="no">.Lloop</span><span class="w"></span>

<span class="nl">.Lepilogue:</span><span class="w"></span>
<span class="w">    </span><span class="nf">not</span><span class="w">     </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="c1">#if __BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__</span>
<span class="w">    </span><span class="nf">ctz</span><span class="w">     </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="c1">#else</span>
<span class="w">    </span><span class="nf">clz</span><span class="w">     </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="c1">#endif</span>
<span class="w">    </span><span class="nf">sub</span><span class="w">     </span><span class="no">a1</span><span class="p">,</span><span class="w"> </span><span class="no">a1</span><span class="p">,</span><span class="w"> </span><span class="no">a3</span><span class="w"></span>
<span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">a0</span><span class="p">,</span><span class="w"> </span><span class="no">a0</span><span class="p">,</span><span class="w"> </span><span class="no">a1</span><span class="w"></span>
<span class="w">    </span><span class="nf">srli</span><span class="w">    </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"></span>
<span class="w">    </span><span class="nf">add</span><span class="w">     </span><span class="no">a0</span><span class="p">,</span><span class="w"> </span><span class="no">a0</span><span class="p">,</span><span class="w"> </span><span class="no">a2</span><span class="w"></span>
<span class="nl">.Ldone:</span><span class="w"></span>
<span class="w">    </span><span class="nf">ret</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="strcmp">
<h3 id="strcmp">strcmp<a class="headerlink" href="#strcmp" title="Permalink to this headline">¶</a></h3>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span>#include &lt;sys/asm.h&gt;

  .text
  .globl strcmp
  .type  strcmp, @function
strcmp:
  or    a4, a0, a1
  li    t2, -1
  and   a4, a4, SZREG-1
  bnez  a4, .Lsimpleloop

  # Main loop for aligned strings
.Lloop:
  REG_L a2, 0(a0)
  REG_L a3, 0(a1)
  orc.b t0, a2
  bne   t0, t2, .Lfoundnull
  addi  a0, a0, SZREG
  addi  a1, a1, SZREG
  beq   a2, a3, .Lloop

  # Words don't match, and no null byte in first word.
  # Get bytes in big-endian order and compare.
#if __BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__
  rev8  a2, a2
  rev8  a3, a3
#endif
  # Synthesize (a2 &gt;= a3) ? 1 : -1 in a branchless sequence.
  sltu a0, a2, a3
  neg  a0, a0
  ori  a0, a0, 1
  ret

.Lfoundnull:
  # Found a null byte.
  # If words don't match, fall back to simple loop.
  bne   a2, a3, .Lsimpleloop

  # Otherwise, strings are equal.
  li    a0, 0
  ret

  # Simple loop for misaligned strings
.Lsimpleloop:
  lbu   a2, 0(a0)
  lbu   a3, 0(a1)
  addi  a0, a0, 1
  addi  a1, a1, 1
  bne   a2, a3, 1f
  bnez  a2, .Lsimpleloop

1:
  sub   a0, a2, a3
  ret

.size   strcmp, .-strcmp
</pre></div>
</div>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2023, RISC-V.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>